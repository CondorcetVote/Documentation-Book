---
meta-description: As a PHP library, register the votes.
---
# Add Votes
_Note: You can add new votes after the results have already been given_

## Vote by vote
::: tip Reference
[`Election->addVote()`](/api-reference/Election%20Class/Election--addVote)
:::

<!-- tabs:start -->
### **With a string**
You can do like this:

```php
$election->addVote('A>B=C=H>G=T>Q');

// It works with spaces, if you want to be less strict...
$election->addVote('A> B = C=H >G=T > Q');

// But you cannot use '<' operator
$vote = 'A<B<C'; // This is not correct
// The following won't work either
$vote = 'A>BC>D'; // This is not correct
```

*The last rank is optional, it will be automatically deduced.*

### **With an array**
```php
$vote[1] = 'Wagner';
$vote[2] = 'Debussy';
$vote[3] = $myPucciniCandidateObject; // can be a string or a candidate object
$vote[4] = 'Varese'; // The last rank is optional
$election->addVote($vote);
```

Use commas or an array in the case of a tie:
```php
$vote[1] = 'Debussy,Wagner';
$vote[2] = [$myPucciniCandidateObject,'Varese'];
$election->addVote($vote);
```

*The last rank is optional, it will be automatically deduced.*

### **With Vote object**
Well, let's be a little more powerful:

```php
use CondorcetPHP\Condorcet\Vote;

$vote1 = new Vote ('A>B=C=H>G=T>Q');
$vote2 = new Vote ( [   1 => 'A',
                        2 => 'C',
                        3 => 'B',
                        4 => ['H','G']
                     ]);

$vote3 = new Vote ( [   1 => $CandidateA, // Condorcet\Candidate
                        2 => $election->getCandidatesList()[array_search('B',$election->getCandidatesList(),false)], // Put the object corresponding to the 'B' candidate from getCandidatesList method. Of course, you can also just enter string 'B' and Condorcet will do the job for you.
                        3 => 'C' // Condorcet will do the job for you.
                     ]);

$election->addVote($vote1);
$election->addVote($vote2);
$election->addVote($vote3);
```
<!-- tabs:end -->


## Add multiple votes from string or text file

<!-- tabs:start -->
### **Native format**
Once your list of candidates was previously recorded, you can parse a text file or a PHP string to record a large number of votes at once.

*You can simultaneously combine this method with traditional PHP calls above.*

#### Syntax
```
tag1,tag2,tag3[...] || A>B=D>C # A comment at the end of the line prefixed by '#'. Never use ';' in comment!
Titan,CoteBoeuf || A>B=D>C # Tags at first, vote at second, separated by '||'
A>C>D>B # Line break to start a new vote. Tags are optional. View above for vote syntax.
tag1,tag2,tag3 || A>B=D>C * 5 # This vote and its tags will be registered 5 times
   tag1  ,  tag2, tag3     ||    A>B=D>C*2        # Works too.
C>D>B*8;A=D>B;Julien,Christelle||A>C>D>B*4;D=B=C>A # Alternatively, you can replace the line break by a semicolon.
```

::: tip Reference
[`Election->parseVotes()`](/api-reference/Election%20Class/Election--parseVotes)
:::

#### Method
```php
$election->parseVotes('data/vote42.txt'); // Path to text file. Absolute or relative.
$election->parseVotes($my_big_string); // Just my big string.
```

### **From Json**


#### Syntax
```php
$json_votes = json_encode( [
	['vote' => 'A>B=D>C', 'tag' => 'ben,jerry'],
	['vote' => ['D', 'B,A', 'C'], 'tag' => ['bela','bartok'], 'multi' => 5],
	['vote' => ['A', ['B','C'], 'D']]
] );
```

> In this example, all parameters are optional except vote.
> * 'multi' is used to record N times the vote.
> * 'tag' is used in the same way as addVote()
> * 'vote' is used in the same way as addVote()

::: tip Reference
[`Election->addVotesFromJson()`](/api-reference/Election%20Class/Election--addVotesFromJson)
:::


#### Method
```php
$election->addVotesFromJson($json_votes);
```

### **Election files formats**
Look at the [**dedicated section**](/book/3.AsPhpLibrary/8.GoFurther/4.ElectionFilesFormats.md#election-files-formats).
<!-- tabs:end -->


## Prevent flooding

Applied and reset after each call to parseVotes() or addVotesFromJson()

::: tip Reference
[`Election->setMaxParseIteration()`](/api-reference/Election%20Class/Election--maxParseIteration)
:::
```php
Election::maxParseIteration = 500; // Will generate an exception and stop after 500 registered votes by call. No votes will be registered.
Election::maxParseIteration = null; // No limit (default mode)
```

## Restrict the number of possible votes for one election
_Note: By default, there is no limit_

::: tip Reference
[`Election->maxVotePerElection`](/api-reference/Election%20Class/Election--maxVotePerElection)
:::
```php
Condorcet::maxVotePerElection = 2042; // All elections, new or woken up, will be limited to this maximum vote number.
Condorcet::maxVotePerElection = null; // No limit for everybody. (Default)
```